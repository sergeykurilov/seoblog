{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{\"0c6W\":function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return o})),n.d(t,\"a\",(function(){return i})),n.d(t,\"c\",(function(){return l})),n.d(t,\"b\",(function(){return u}));var r=n(\"obyI\"),c=n(\"LpSC\"),a=n.n(c),s=n(\"iuBY\"),o=function(e){return a()(\"\".concat(r.a,\"/user/\").concat(e),{method:\"GET\",headers:{Accept:\"application/json\"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},i=function(e){return a()(\"\".concat(r.a,\"/user/profile\"),{method:\"GET\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},l=function(e,t){return a()(\"\".concat(r.a,\"/user/update\"),{method:\"PUT\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(t)},body:e}).then((function(e){return Object(s.c)(e),e.json()})).catch((function(e){return console.log(e)}))},u=function(e,t){if(localStorage.getItem(\"user\")){var n=JSON.parse(localStorage.getItem(\"user\"));n=e,localStorage.setItem(\"user\",JSON.stringify(n)),t()}}},GGaf:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/update\",function(){return n(\"j0R5\")}])},LZ8r:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o}));var r=n(\"nKUr\"),c=n(\"q1tI\"),a=n(\"iuBY\"),s=n(\"20a2\"),o=function(e){var t=e.children;return Object(c.useEffect)((function(){Object(a.d)()||0!==Object(a.d)().role||s.Router.push(\"/signin\")}),[]),Object(r.jsx)(r.Fragment,{children:t})}},j0R5:function(e,t,n){\"use strict\";n.r(t);var r=n(\"nKUr\"),c=n(\"h7RS\"),a=n(\"LZ8r\"),s=n(\"cpVT\"),o=n(\"q1tI\"),i=n(\"0c6W\"),l=n(\"iuBY\"),u=n(\"obyI\");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){var e=Object(o.useState)({username:\"\",name:\"\",email:\"\",password:\"\",error:\"\",success:!1,loading:!1,photo:\"\",userData:\"\",about:\"\"}),t=e[0],n=e[1],c=Object(l.b)(\"token\"),a=t.username,j=t.name,b=t.email,m=t.password,f=t.success,p=t.error,O=t.loading,h=t.photo,g=t.userData,x=t.about;console.log(h);var v=function(e){return function(r){var c,a=\"photo\"===e?r.target.files[0]:r.target.value,o=new FormData;o.set(e,a),n(d(d({},t),{},(c={},Object(s.a)(c,e,a),Object(s.a)(c,\"userData\",o),Object(s.a)(c,\"error\",\"\"),Object(s.a)(c,\"success\",!1),c)))}},N=function(e){e.preventDefault(),n(d(d({},t),{},{loading:!0})),Object(i.c)(g,c).then((function(e){e.error?n(d(d({},t),{},{error:e.error,success:!1,loading:!1})):Object(i.b)(e,(function(){n(d(d({},t),{},{name:e.name,username:e.username,senderEmail:e.email,about:e.about,success:!0,loading:!1}))}))}))};return Object(o.useEffect)((function(){Object(i.a)(c).then((function(e){var r;e.error?n(d(d({},t),{},{error:null!==(r=e.error)&&void 0!==r?r:void 0})):n(d(d({},t),{},{name:e.name,username:e.username,senderEmail:e.email,about:e.about}))}))}),[a,x,b,m,h]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(\"div\",{className:\"container\",children:Object(r.jsxs)(\"div\",{className:\"row\",children:[Object(r.jsx)(\"div\",{className:\"col-md-4 mb-5\",children:Object(r.jsx)(\"img\",{src:\"\".concat(u.a,\"/user/photo/\").concat(a),alt:a,className:\"img img-fluid mb-3\"})}),Object(r.jsxs)(\"div\",{className:\"col-md-8\",children:[Object(r.jsx)(\"div\",{className:\"alert alert-danger\",style:{display:p?\"\":\"none\"},children:p}),Object(r.jsx)(\"div\",{className:\"alert alert-success\",style:{display:O?\"\":\"none\"},children:\"Loading.....\"}),Object(r.jsx)(\"div\",{className:\"alert alert-success\",style:{display:f?\"\":\"none\"},children:\"Profile was successfully updated\"}),\"update form\",Object(r.jsx)(\"hr\",{}),Object(r.jsxs)(\"form\",{onSubmit:N,children:[Object(r.jsx)(\"div\",{className:\"form-group\",children:Object(r.jsxs)(\"label\",{className:\"btn btn-outline-info\",children:[\"Profile photo\",Object(r.jsx)(\"input\",{type:\"file\",accept:\"image/*\",hidden:!0,className:\"form-control\",onChange:v(\"photo\")})]})}),Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"Name\"}),Object(r.jsx)(\"input\",{type:\"text\",className:\"form-control\",value:j,onChange:v(\"name\")})]}),Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"Password\"}),Object(r.jsx)(\"input\",{type:\"password\",className:\"form-control\",value:m,onChange:v(\"password\")})]}),Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"Email\"}),Object(r.jsx)(\"input\",{type:\"email\",className:\"form-control\",value:b,onChange:v(\"email\")})]}),Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"About\"}),Object(r.jsx)(\"input\",{type:\"textarea\",className:\"form-control\",value:x,onChange:v(\"about\")})]}),Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"Username\"}),Object(r.jsx)(\"input\",{type:\"text\",className:\"form-control\",value:a,onChange:v(\"username\")})]}),Object(r.jsx)(\"div\",{children:Object(r.jsx)(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})})]})]})]})})})};t.default=function(){return Object(r.jsx)(c.a,{children:Object(r.jsx)(a.a,{children:Object(r.jsx)(\"div\",{className:\"container-fluid\",children:Object(r.jsx)(\"div\",{className:\"row\",children:Object(r.jsx)(b,{})})})})})}}},[[\"GGaf\",1,0,2,3]]]);","map":{"version":3,"sources":["static/chunks/pages/user/update-744d4483f678603e4d7f.js"],"names":["_N_E","window","push","0c6W","module","__webpack_exports__","__webpack_require__","d","userPublicProfile","getProfile","updateProfile","update","_config__WEBPACK_IMPORTED_MODULE_0__","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default","n","_auth__WEBPACK_IMPORTED_MODULE_2__","username","concat","method","headers","Accept","then","response","json","err","console","log","token","Authorization","user","body","Object","next","localStorage","getItem","auth","JSON","parse","setItem","stringify","GGaf","exports","__NEXT_P","LZ8r","Private","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_3__","_ref","children","role","j0R5","r","jsx_runtime","Layout","defineProperty","react","config","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","auth_ProfileUpdate","_useState","name","email","password","error","success","loading","photo","userData","about","values","setValues","handleChange","e","_objectSpread2","value","files","userFormData","FormData","set","handleSubmit","preventDefault","data","senderEmail","profile","_profile$error","undefined","className","src","alt","style","display","onSubmit","type","accept","hidden","onChange"],"mappings":"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"},"name":"static/chunks/pages/user/update-744d4483f678603e4d7f.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[31],{\n\n/***/ \"0c6W\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return userPublicProfile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getProfile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return updateProfile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return update; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"obyI\");\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"LpSC\");\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"iuBY\");\n\n\n\nvar userPublicProfile = function userPublicProfile(username) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default()(\"\".concat(_config__WEBPACK_IMPORTED_MODULE_0__[/* API */ \"a\"], \"/user/\").concat(username), {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json'\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nvar getProfile = function getProfile(token) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default()(\"\".concat(_config__WEBPACK_IMPORTED_MODULE_0__[/* API */ \"a\"], \"/user/profile\"), {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nvar updateProfile = function updateProfile(user, token) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default()(\"\".concat(_config__WEBPACK_IMPORTED_MODULE_0__[/* API */ \"a\"], \"/user/update\"), {\n    method: 'PUT',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    },\n    body: user\n  }).then(function (response) {\n    Object(_auth__WEBPACK_IMPORTED_MODULE_2__[/* handleResponse */ \"c\"])(response);\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nvar update = function update(user, next) {\n  if (true) {\n    if (localStorage.getItem('user')) {\n      var auth = JSON.parse(localStorage.getItem('user'));\n      auth = user;\n      localStorage.setItem('user', JSON.stringify(auth));\n      next();\n    }\n  }\n};\n\n/***/ }),\n\n/***/ \"GGaf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/update\",\n      function () {\n        return __webpack_require__(\"j0R5\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"LZ8r\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Private; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"iuBY\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nvar Private = function Private(_ref) {\n  var children = _ref.children;\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!Object(_auth__WEBPACK_IMPORTED_MODULE_2__[/* isAuth */ \"d\"])() && Object(_auth__WEBPACK_IMPORTED_MODULE_2__[/* isAuth */ \"d\"])().role === 0) {\n      next_router__WEBPACK_IMPORTED_MODULE_3__[\"Router\"].push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: children\n  });\n};\n\n/***/ }),\n\n/***/ \"j0R5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./components/Layout.jsx + 15 modules\nvar Layout = __webpack_require__(\"h7RS\");\n\n// EXTERNAL MODULE: ./actions/Private.js\nvar Private = __webpack_require__(\"LZ8r\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"cpVT\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./actions/user.js\nvar user = __webpack_require__(\"0c6W\");\n\n// EXTERNAL MODULE: ./actions/auth.js\nvar auth = __webpack_require__(\"iuBY\");\n\n// EXTERNAL MODULE: ./config.js\nvar config = __webpack_require__(\"obyI\");\n\n// CONCATENATED MODULE: ./components/auth/ProfileUpdate.js\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\nvar ProfileUpdate_ProfileUpdate = function ProfileUpdate() {\n  var _useState = Object(react[\"useState\"])({\n    username: '',\n    name: '',\n    email: '',\n    password: '',\n    error: '',\n    success: false,\n    loading: false,\n    photo: '',\n    userData: '',\n    about: ''\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = Object(auth[\"b\" /* getCookie */])(\"token\");\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      password = values.password,\n      success = values.success,\n      error = values.error,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData,\n      about = values.about;\n  console.log(photo);\n\n  var init = function init() {\n    Object(user[\"a\" /* getProfile */])(token).then(function (profile) {\n      if (profile.error || undefined) {\n        var _profile$error;\n\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: (_profile$error = profile.error) !== null && _profile$error !== void 0 ? _profile$error : undefined\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          name: profile.name,\n          username: profile.username,\n          senderEmail: profile.email,\n          about: profile.about\n        }));\n      }\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      // console.log(e.target.value);\n      var value = name === 'photo' ? e.target.files[0] : e.target.value;\n      var userFormData = new FormData();\n      userFormData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, Object(defineProperty[\"a\" /* default */])(_objectSpread2, name, value), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"userData\", userFormData), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"error\", ''), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    Object(user[\"c\" /* updateProfile */])(userData, token).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          success: false,\n          loading: false\n        }));\n      } else {\n        Object(user[\"b\" /* update */])(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            name: data.name,\n            username: data.username,\n            senderEmail: data.email,\n            about: data.about,\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var updateForm = function updateForm() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"label\", {\n          className: \"btn btn-outline-info\",\n          children: [\"Profile photo\", /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            hidden: true,\n            className: \"form-control\",\n            onChange: handleChange('photo')\n          })]\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Name\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: name,\n          onChange: handleChange('name')\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          value: password,\n          onChange: handleChange('password')\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          value: email,\n          onChange: handleChange('email')\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"About\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"textarea\",\n          className: \"form-control\",\n          value: about,\n          onChange: handleChange('about')\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Username\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: username,\n          onChange: handleChange('username')\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit\"\n        })\n      })]\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? '' : 'none'\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? '' : 'none'\n      },\n      children: \"Profile was successfully updated\"\n    });\n  };\n\n  var showLoading = function showLoading() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: loading ? '' : 'none'\n      },\n      children: \"Loading.....\"\n    });\n  };\n\n  Object(react[\"useEffect\"])(function () {\n    init();\n  }, [username, about, email, password, photo]);\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          className: \"col-md-4 mb-5\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\", {\n            src: \"\".concat(config[\"a\" /* API */], \"/user/photo/\").concat(username),\n            alt: username,\n            className: \"img img-fluid mb-3\"\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-md-8\",\n          children: [showError(), showLoading(), showSuccess(), \"update form\", /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\", {}), updateForm()]\n        })]\n      })\n    })\n  });\n};\n\n/* harmony default export */ var auth_ProfileUpdate = (ProfileUpdate_ProfileUpdate);\n// CONCATENATED MODULE: ./pages/user/update.js\n\n\n\n\n\nfunction UserUpdate() {\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Layout[\"a\" /* Layout */], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Private[\"a\" /* Private */], {\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_ProfileUpdate, {})\n        })\n      })\n    })\n  });\n}\n\n/* harmony default export */ var update = __webpack_exports__[\"default\"] = (UserUpdate);\n\n/***/ })\n\n},[[\"GGaf\",1,0,2,3]]]);","inputSourceMap":{"version":3,"sources":["E:\\seoblog\\frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!E:\\seoblog\\frontend\\actions\\user.js","E:\\seoblog\\frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fuser%2Fupdate&absolutePagePath=private-next-pages%2Fuser%2Fupdate.js!","E:\\seoblog\\frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!E:\\seoblog\\frontend\\actions\\Private.js","E:\\seoblog\\frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!E:\\seoblog\\frontend\\components\\auth\\ProfileUpdate.js","E:\\seoblog\\frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!E:\\seoblog\\frontend\\pages\\user\\update.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { API } from \"../config\";\nimport fetch from \"isomorphic-fetch\";\nimport { handleResponse } from \"./auth\";\nexport var userPublicProfile = function userPublicProfile(username) {\n  return fetch(\"\".concat(API, \"/user/\").concat(username), {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json'\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nexport var getProfile = function getProfile(token) {\n  return fetch(\"\".concat(API, \"/user/profile\"), {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nexport var updateProfile = function updateProfile(user, token) {\n  return fetch(\"\".concat(API, \"/user/update\"), {\n    method: 'PUT',\n    headers: {\n      Accept: 'application/json',\n      Authorization: \"Bearer \".concat(token)\n    },\n    body: user\n  }).then(function (response) {\n    handleResponse(response);\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nexport var update = function update(user, next) {\n  if (true) {\n    if (localStorage.getItem('user')) {\n      var auth = JSON.parse(localStorage.getItem('user'));\n      auth = user;\n      localStorage.setItem('user', JSON.stringify(auth));\n      next();\n    }\n  }\n};","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/update\",\n      function () {\n        return require(\"private-next-pages/user/update.js\");\n      }\n    ]);\n  ","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect } from \"react\";\nimport { isAuth } from \"./auth\";\nimport { Router } from \"next/router\";\nexport var Private = function Private(_ref) {\n  var children = _ref.children;\n  useEffect(function () {\n    if (!isAuth() && isAuth().role === 0) {\n      Router.push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n};","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"E:/seoblog/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { getProfile, updateProfile, update } from \"../../actions/user\";\nimport { getCookie, isAuth } from \"../../actions/auth\";\nimport { API } from \"../../config\";\n\nvar ProfileUpdate = function ProfileUpdate() {\n  var _useState = useState({\n    username: '',\n    name: '',\n    email: '',\n    password: '',\n    error: '',\n    success: false,\n    loading: false,\n    photo: '',\n    userData: '',\n    about: ''\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = getCookie(\"token\");\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      password = values.password,\n      success = values.success,\n      error = values.error,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData,\n      about = values.about;\n  console.log(photo);\n\n  var init = function init() {\n    getProfile(token).then(function (profile) {\n      if (profile.error || undefined) {\n        var _profile$error;\n\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: (_profile$error = profile.error) !== null && _profile$error !== void 0 ? _profile$error : undefined\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          name: profile.name,\n          username: profile.username,\n          senderEmail: profile.email,\n          about: profile.about\n        }));\n      }\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      // console.log(e.target.value);\n      var value = name === 'photo' ? e.target.files[0] : e.target.value;\n      var userFormData = new FormData();\n      userFormData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"userData\", userFormData), _defineProperty(_objectSpread2, \"error\", ''), _defineProperty(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    updateProfile(userData, token).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          success: false,\n          loading: false\n        }));\n      } else {\n        update(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            name: data.name,\n            username: data.username,\n            senderEmail: data.email,\n            about: data.about,\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var updateForm = function updateForm() {\n    return /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxs(\"label\", {\n          className: \"btn btn-outline-info\",\n          children: [\"Profile photo\", /*#__PURE__*/_jsx(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            hidden: true,\n            className: \"form-control\",\n            onChange: handleChange('photo')\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Name\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: name,\n          onChange: handleChange('name')\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          value: password,\n          onChange: handleChange('password')\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          value: email,\n          onChange: handleChange('email')\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"About\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"textarea\",\n          className: \"form-control\",\n          value: about,\n          onChange: handleChange('about')\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Username\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: username,\n          onChange: handleChange('username')\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit\"\n        })\n      })]\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? '' : 'none'\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? '' : 'none'\n      },\n      children: \"Profile was successfully updated\"\n    });\n  };\n\n  var showLoading = function showLoading() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: loading ? '' : 'none'\n      },\n      children: \"Loading.....\"\n    });\n  };\n\n  useEffect(function () {\n    init();\n  }, [username, about, email, password, photo]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-md-4 mb-5\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"\".concat(API, \"/user/photo/\").concat(username),\n            alt: username,\n            className: \"img img-fluid mb-3\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-md-8\",\n          children: [showError(), showLoading(), showSuccess(), \"update form\", /*#__PURE__*/_jsx(\"hr\", {}), updateForm()]\n        })]\n      })\n    })\n  });\n};\n\nexport default ProfileUpdate;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Layout } from \"../../components/Layout\";\nimport { Private } from \"../../actions/Private\";\nimport ProfileUpdate from \"../../components/auth/ProfileUpdate\";\n\nfunction UserUpdate() {\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Private, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(ProfileUpdate, {})\n        })\n      })\n    })\n  });\n}\n\nexport default UserUpdate;"]}}