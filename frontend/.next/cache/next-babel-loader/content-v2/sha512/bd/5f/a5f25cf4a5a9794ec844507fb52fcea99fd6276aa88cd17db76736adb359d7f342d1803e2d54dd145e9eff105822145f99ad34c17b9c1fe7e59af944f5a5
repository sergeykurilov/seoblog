{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { Layout } from '../../components/Layout';\nimport { useState, useEffect } from 'react';\nimport { singleBlog, listRelated } from '../../actions/blog';\nimport { API, DOMAIN, APP_NAME } from '../../config';\nimport renderHTML from 'react-render-html';\nimport moment from 'moment';\nimport SmallCard from '../../components/Blog/Card/SmallCard';\nimport SmallCards from \"../../components/Blog/Card/SmallCard\";\nimport DisqusThread from \"../../components/DisqusThread\";\n\nconst SingleBlog = ({\n  blog,\n  query\n}) => {\n  const {\n    0: related,\n    1: setRelated\n  } = useState([]);\n\n  const loadRelated = () => {\n    listRelated({\n      blog\n    }).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setRelated(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadRelated();\n  }, []);\n\n  const head = () => /*#__PURE__*/_jsxs(Head, {\n    children: [/*#__PURE__*/_jsxs(\"title\", {\n      children: [blog.title, \" | \", APP_NAME]\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      name: \"description\",\n      content: blog.mdesc\n    }), /*#__PURE__*/_jsx(\"link\", {\n      rel: \"canonical\",\n      href: `${DOMAIN}/blogs/${query.slug}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:title\",\n      content: `${blog.title}| ${APP_NAME}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:description\",\n      content: blog.mdesc\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"webiste\"\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:url\",\n      content: `${DOMAIN}/blogs/${query.slug}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: `${APP_NAME}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:image\",\n      content: `${API}/blog/photo/${blog.slug}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:image:secure_url\",\n      ccontent: `${API}/blog/photo/${blog.slug}`\n    }), /*#__PURE__*/_jsx(\"meta\", {\n      property: \"og:image:type\",\n      content: \"image/jpg\"\n    })]\n  });\n\n  const showBlogCategories = blog => blog.categories.map((c, i) => /*#__PURE__*/_jsx(Link, {\n    href: `/categories/${c.slug}`,\n    children: /*#__PURE__*/_jsx(\"a\", {\n      className: \"btn btn-primary mr-1 ml-1 mt-3\",\n      children: c.name\n    })\n  }, i));\n\n  const showBlogTags = blog => blog.tags.map((t, i) => /*#__PURE__*/_jsx(Link, {\n    href: `/tags/${t.slug}`,\n    children: /*#__PURE__*/_jsx(\"a\", {\n      className: \"btn btn-outline-primary mr-1 ml-1 mt-3\",\n      children: t.name\n    })\n  }, i));\n\n  const showComments = () => {\n    return /*#__PURE__*/_jsx(DisqusThread, {\n      id: blog.id,\n      title: blog.title,\n      path: `/blog/${blog.slug}`\n    });\n  };\n\n  const showRelatedBlog = () => {\n    return related.map((blog, i) => /*#__PURE__*/_jsx(\"div\", {\n      className: \"col-md-4\",\n      children: /*#__PURE__*/_jsx(\"article\", {\n        children: /*#__PURE__*/_jsx(SmallCards, {\n          blog: blog\n        })\n      })\n    }, i));\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [head(), /*#__PURE__*/_jsx(Layout, {\n      children: /*#__PURE__*/_jsx(\"main\", {\n        children: /*#__PURE__*/_jsxs(\"article\", {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"container-fluid\",\n            children: [/*#__PURE__*/_jsx(\"section\", {\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"row\",\n                style: {\n                  marginTop: '-30px'\n                },\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  src: `${API}/blog/photo/${blog.slug}`,\n                  alt: blog.title,\n                  className: \"img img-fluid featured-image\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"section\", {\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"container\",\n                children: [/*#__PURE__*/_jsx(\"h1\", {\n                  className: \"display-2 pb-3 pt-3 text-center font-weight-bold\",\n                  children: blog.title\n                }), /*#__PURE__*/_jsxs(\"p\", {\n                  className: \"lead mt-3 mark\",\n                  children: [\"Written by \", /*#__PURE__*/_jsx(Link, {\n                    href: `/profile/${blog.postedBy.username}`,\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: blog.postedBy.username\n                    })\n                  }), \" \", ' ', \"| Published \", moment(blog.updatedAt).fromNow()]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"pb-3\",\n                  children: [showBlogCategories(blog), showBlogTags(blog), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {})]\n                })]\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsx(\"section\", {\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-md-12 lead\",\n                children: renderHTML(blog.body)\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"container\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              className: \"text-center pt-5 pb-5 h2\",\n              children: \"Related blogs\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"row\",\n              children: showRelatedBlog()\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"container pb-5\",\n            children: showComments()\n          })]\n        })\n      })\n    })]\n  });\n};\n\nSingleBlog.getInitialProps = ({\n  query\n}) => {\n  return singleBlog(query.slug).then(data => {\n    if (data.error) {\n      console.log(data.error);\n    } else {\n      console.log('GET INITIAL PROPS IN SINGLE BLOG', data);\n      return {\n        blog: data,\n        query\n      };\n    }\n  });\n};\n\nexport default SingleBlog;","map":null,"metadata":{},"sourceType":"module"}